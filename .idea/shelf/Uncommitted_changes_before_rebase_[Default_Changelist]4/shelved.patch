Index: app/src/main/java/ir/tdaapp/diako/shaar/Cars/Model/Repository/database/TblCarFavoriets.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ir.tdaapp.diako.shaar.Cars.Model.Repository.database;\r\n\r\nimport android.content.Context;\r\nimport android.database.Cursor;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport ir.tdaapp.diako.shaar.Adapter.DBAdapter;\r\nimport ir.tdaapp.diako.shaar.Cars.View.Activities.CarActivity;\r\nimport ir.tdaapp.diako.shaar.CityGuide.Models.Repositories.Database.Common;\r\nimport ir.tdaapp.diako.shaar.CityGuide.Views.Activities.GuideActivity;\r\n\r\npublic class TblCarFavoriets {\r\n\r\n    Context context;\r\n    DBAdapter db;\r\n\r\n    public TblCarFavoriets(Context context) {\r\n        this.context = context;\r\n        db = ((CarActivity) context).getAdapter();\r\n    }\r\n\r\n\r\n\r\n    public List<Integer> getIds() {\r\n        List<Integer> result = new ArrayList<>();\r\n\r\n        Cursor q = db.ExecuteQ(\"select * from TblCarFavorites\");\r\n\r\n        for (int i = 0; i < q.getCount(); i++) {\r\n            try {\r\n                result.add(q.getInt(q.getColumnIndex(\"ItemId\")));\r\n            } catch (Exception e) {\r\n            }\r\n            q.moveToNext();\r\n        }\r\n        q.close();\r\n\r\n        return result;\r\n    }\r\n\r\n    public void addFavorite(int itemId) {\r\n        try {\r\n            int id = Common.getId(db, \"TblCarFavorites\");\r\n            db.ExecuteQ(\"insert into TblCarFavorites (Id,ItemId) values (\" + id + \",\" + itemId + \")\");\r\n        } catch (Exception e) {\r\n        }\r\n    }\r\n\r\n    public void deleteFavorite(int itemId){\r\n        try {\r\n            db.ExecuteQ(\"delete from TblCarFavorites where ItemId=\"+itemId);\r\n        }catch (Exception e){}\r\n    }\r\n\r\n    public boolean checkState(int itemId){\r\n        try {\r\n            Cursor q=db.ExecuteQ(\"select count(ItemId) from TblCarFavorites where ItemId=\"+itemId);\r\n            if (q.getString(0) != null) {\r\n                return q.getInt(0) > 0;\r\n            } else {\r\n                return false;\r\n            }\r\n        }catch (Exception e){\r\n            return false;\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/ir/tdaapp/diako/shaar/Cars/Model/Repository/database/TblCarFavoriets.java	(revision 6590b616417e55a1bcf77ba8033df3bb9ce50ae8)
+++ app/src/main/java/ir/tdaapp/diako/shaar/Cars/Model/Repository/Database/TblCarFavoriets.java	(date 1620283827169)
@@ -1,4 +1,4 @@
-package ir.tdaapp.diako.shaar.Cars.Model.Repository.database;
+package ir.tdaapp.diako.shaar.Cars.Model.Repository.Database;
 
 import android.content.Context;
 import android.database.Cursor;
@@ -9,7 +9,6 @@
 import ir.tdaapp.diako.shaar.Adapter.DBAdapter;
 import ir.tdaapp.diako.shaar.Cars.View.Activities.CarActivity;
 import ir.tdaapp.diako.shaar.CityGuide.Models.Repositories.Database.Common;
-import ir.tdaapp.diako.shaar.CityGuide.Views.Activities.GuideActivity;
 
 public class TblCarFavoriets {
 
Index: app/src/main/java/ir/tdaapp/diako/shaar/Cars/Presenter/CarFavoriteItemPresenter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ir.tdaapp.diako.shaar.Cars.Presenter;\r\n\r\nimport android.content.Context;\r\n\r\nimport java.util.List;\r\n\r\nimport io.reactivex.rxjava3.annotations.NonNull;\r\nimport io.reactivex.rxjava3.core.Observable;\r\nimport io.reactivex.rxjava3.core.Single;\r\nimport io.reactivex.rxjava3.disposables.Disposable;\r\nimport io.reactivex.rxjava3.observers.DisposableSingleObserver;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.Repository.Server.CarFavoriteitemsApi;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.Repository.database.TblCarFavoriets;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.Services.CarFavoriteItemfragmentService;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.ViewModels.CarDetailModel;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.ViewModels.CarListModel;\r\n\r\npublic class CarFavoriteItemPresenter {\r\n\r\n    Context context;\r\n    CarFavoriteItemfragmentService service;\r\n    CarFavoriteitemsApi api;\r\n    TblCarFavoriets tblCarFavoriets;\r\n    Disposable getFavoriteDisposable, setFavoriteDisposable;\r\n\r\n    public CarFavoriteItemPresenter(Context context, CarFavoriteItemfragmentService service) {\r\n        this.context = context;\r\n        this.service = service;\r\n        this.api = new CarFavoriteitemsApi();\r\n        this.tblCarFavoriets = new TblCarFavoriets(context);\r\n    }\r\n\r\n    public void start() {\r\n        getFavoritesCar(tblCarFavoriets.getIds());\r\n    }\r\n\r\n    private void getFavoritesCar(List<Integer> ids) {\r\n        service.loadingState(true);\r\n        Single<List<CarListModel>> data = api.sendRequest(ids);\r\n\r\n        getFavoriteDisposable = data.subscribeWith(new DisposableSingleObserver<List<CarListModel>>() {\r\n            @Override\r\n            public void onSuccess(@NonNull List<CarListModel> carListModels) {\r\n                setFavorites(carListModels);\r\n            }\r\n\r\n            @Override\r\n            public void onError(@NonNull Throwable e) {\r\n                    service.onError(e.getMessage());\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void setFavorites(List<CarListModel> carListModels) {\r\n\r\n        Observable<CarListModel> data = Observable.fromIterable(carListModels);\r\n        setFavoriteDisposable = data.subscribe(carListModel -> {\r\n            service.loadingState(false);\r\n            service.onItemReceived(carListModel);\r\n\r\n        }, throwable -> {\r\n\r\n        }, () -> {\r\n            service.loadingState(false);\r\n            service.onFinish();\r\n        });\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/ir/tdaapp/diako/shaar/Cars/Presenter/CarFavoriteItemPresenter.java	(revision 6590b616417e55a1bcf77ba8033df3bb9ce50ae8)
+++ app/src/main/java/ir/tdaapp/diako/shaar/Cars/Presenter/CarFavoriteItemPresenter.java	(date 1620283827085)
@@ -10,9 +10,8 @@
 import io.reactivex.rxjava3.disposables.Disposable;
 import io.reactivex.rxjava3.observers.DisposableSingleObserver;
 import ir.tdaapp.diako.shaar.Cars.Model.Repository.Server.CarFavoriteitemsApi;
-import ir.tdaapp.diako.shaar.Cars.Model.Repository.database.TblCarFavoriets;
+import ir.tdaapp.diako.shaar.Cars.Model.Repository.Database.TblCarFavoriets;
 import ir.tdaapp.diako.shaar.Cars.Model.Services.CarFavoriteItemfragmentService;
-import ir.tdaapp.diako.shaar.Cars.Model.ViewModels.CarDetailModel;
 import ir.tdaapp.diako.shaar.Cars.Model.ViewModels.CarListModel;
 
 public class CarFavoriteItemPresenter {
Index: app/src/main/java/ir/tdaapp/diako/shaar/Cars/Model/Utilities/CarBaseApi.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ir.tdaapp.diako.shaar.Cars.Model.Utilities;\r\n\r\npublic class CarBaseApi {\r\n\r\n  public static final String API_URL = \"https://api.shaarapp.ir/api/\";\r\n\r\n  public static final String API_IMAGE = \"https://api.shaarapp.ir/CityGuideImage/Items/\";\r\n  public static final String API_IMAGE_CAR = \"https://api.shaarapp.ir/CarImage/\";\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/ir/tdaapp/diako/shaar/Cars/Model/Utilities/CarBaseApi.java	(revision 6590b616417e55a1bcf77ba8033df3bb9ce50ae8)
+++ app/src/main/java/ir/tdaapp/diako/shaar/Cars/Model/Utilities/CarBaseApi.java	(date 1620284179502)
@@ -6,4 +6,5 @@
 
   public static final String API_IMAGE = "https://api.shaarapp.ir/CityGuideImage/Items/";
   public static final String API_IMAGE_CAR = "https://api.shaarapp.ir/CarImage/";
+  public static final String API_IMAGE_CAR_EXPERT = "https://api.shaarapp.ir/UserProImage/";
 }
Index: app/src/main/java/ir/tdaapp/diako/shaar/Cars/View/Fragments/CarDeatailFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ir.tdaapp.diako.shaar.Cars.View.Fragments;\r\n\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.transition.TransitionManager;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.coordinatorlayout.widget.CoordinatorLayout;\r\nimport androidx.viewpager2.widget.ViewPager2;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.facebook.shimmer.ShimmerFrameLayout;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.Adapters.SliderCarItemDetails;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.Repository.database.TblCarFavoriets;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.Services.CarDetailFragmentService;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.Utilities.CarBaseApi;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.Utilities.CarBaseFragment;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.ViewModels.CarDetailModel;\r\nimport ir.tdaapp.diako.shaar.Cars.Model.ViewModels.CarDetailsPhotoModel;\r\nimport ir.tdaapp.diako.shaar.Cars.Presenter.CarDetailFragmentPresenter;\r\nimport ir.tdaapp.diako.shaar.CityGuide.Models.Services.OnGlideImageListener;\r\nimport ir.tdaapp.diako.shaar.CityGuide.Models.Utilities.ZoomOutPageTransformer;\r\nimport ir.tdaapp.diako.shaar.R;\r\n\r\npublic class CarDeatailFragment extends CarBaseFragment implements OnGlideImageListener, CarDetailFragmentService, View.OnClickListener {\r\n\r\n    public static final String TAG = \"CarDeatailFragment\";\r\n\r\n    int itemId, userId;\r\n\r\n    TextView carName, productionYear, mileage, carBodyStatus, carBodyStatus2, brand,\r\n            chasisStatus, insuranceTime, gearBox, ducument, salesType, price, description,\r\n            expertName, txtExchange, address;\r\n\r\n    CircleImageView circleImageView;\r\n    ImageButton favorite, refresh, btnBack;\r\n    ImageView back, forward;\r\n    ShimmerFrameLayout loading;\r\n    Button textExpert, callExpert, showMoreDescribe;\r\n\r\n    CoordinatorLayout root;\r\n    ViewPager2 viewPager;\r\n\r\n    String descriptionText, expertPhone;\r\n    TblCarFavoriets tblCarFavoriets;\r\n    CarDetailFragmentPresenter presenter;\r\n\r\n    SliderCarItemDetails viewPagerAdapter;\r\n\r\n    CarDetailModel model = new CarDetailModel();\r\n\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.car_details_fragment, container, false);\r\n\r\n        findView(view);\r\n        implement();\r\n\r\n        return view;\r\n    }\r\n\r\n    private void findView(View view) {\r\n\r\n        presenter = new CarDetailFragmentPresenter(getContext(), this);\r\n\r\n        //car main info\r\n        carName = view.findViewById(R.id.car_name_detail_fragment);\r\n        productionYear = view.findViewById(R.id.txt_production_yaer);\r\n        mileage = view.findViewById(R.id.txt_milage_detail);\r\n        carBodyStatus = view.findViewById(R.id.txt_car_body_status_content);\r\n        carBodyStatus2 = view.findViewById(R.id.txt_car_body_status2);\r\n        brand = view.findViewById(R.id.txt_car_brand);\r\n        chasisStatus = view.findViewById(R.id.tct_car_chasis_status);\r\n        insuranceTime = view.findViewById(R.id.txt_car_insurance_time);\r\n        gearBox = view.findViewById(R.id.txt_car_gearBox_type);\r\n        ducument = view.findViewById(R.id.txt_car_ducument_type);\r\n        salesType = view.findViewById(R.id.txt_car_sales_type);\r\n        price = view.findViewById(R.id.txt_car_price);\r\n        txtExchange = view.findViewById(R.id.txt_car_exchange);\r\n        address = view.findViewById(R.id.txt_car_address);\r\n\r\n        //other TextViews\r\n        description = view.findViewById(R.id.txt_car_description);\r\n        expertName = view.findViewById(R.id.txt_expert_name);\r\n\r\n        //ImageViews\r\n        circleImageView = view.findViewById(R.id.circle_imageview_expert);\r\n        favorite = view.findViewById(R.id.img_faverite_detail);\r\n        back = view.findViewById(R.id.img_back_viewPager);\r\n        forward = view.findViewById(R.id.img_forward_viewPager);\r\n\r\n        //Buttons\r\n        showMoreDescribe = view.findViewById(R.id.btn_show_more_describe);\r\n        callExpert = view.findViewById(R.id.btn_call_expert);\r\n        textExpert = view.findViewById(R.id.btn_text_expert);\r\n        refresh = view.findViewById(R.id.imgBtn_refresh_car);\r\n        btnBack = view.findViewById(R.id.imageButton_details_car);\r\n\r\n        loading = view.findViewById(R.id.viewPager_loading);\r\n        root = view.findViewById(R.id.car_detail_root_layout);\r\n        viewPager = view.findViewById(R.id.viewPager_car_detail);\r\n        tblCarFavoriets = new TblCarFavoriets(getContext());\r\n\r\n\r\n        CarDetailModel model = new CarDetailModel();\r\n        expertPhone = model.getPhone();\r\n\r\n\r\n    }\r\n\r\n    private void implement() {\r\n        presenter.start(1);\r\n        callExpert.setOnClickListener(this);\r\n        textExpert.setOnClickListener(this);\r\n        showMoreDescribe.setOnClickListener(this);\r\n        favorite.setOnClickListener(this);\r\n        refresh.setOnClickListener(this);\r\n        back.setOnClickListener(this);\r\n        forward.setOnClickListener(this);\r\n        btnBack.setOnClickListener(this);\r\n\r\n        viewPager.setOrientation(ViewPager2.ORIENTATION_HORIZONTAL);\r\n        viewPager.setPageTransformer(new ZoomOutPageTransformer());\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n\r\n        switch (v.getId()) {\r\n\r\n            case R.id.btn_call_expert:\r\n                dialContactPhone(expertPhone + \"\");\r\n                break;\r\n\r\n            case R.id.btn_text_expert:\r\n                sendTextToExpert();\r\n                break;\r\n\r\n            case R.id.btn_show_more_describe:\r\n\r\n                TransitionManager.beginDelayedTransition(root);\r\n                description.setText(descriptionText);\r\n                showMoreDescribe.setVisibility(View.GONE);\r\n                break;\r\n\r\n            case R.id.img_faverite_detail:\r\n                if (tblCarFavoriets.checkState(itemId)) {\r\n                    tblCarFavoriets.deleteFavorite(itemId);\r\n                    favorite.setImageResource(R.drawable.ic_baseline_favorite_border_24);\r\n                } else {\r\n                    tblCarFavoriets.addFavorite(itemId);\r\n                    favorite.setImageResource(R.drawable.ic_baseline_favorite_24);\r\n                }\r\n                break;\r\n\r\n            case R.id.img_forward_viewPager:\r\n                try {\r\n                    viewPager.setCurrentItem(viewPager.getCurrentItem() + 1, true);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n                break;\r\n\r\n            case R.id.img_back_viewPager:\r\n                try {\r\n                    viewPager.setCurrentItem(viewPager.getCurrentItem() - 1, true);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n            case R.id.imageButton_details_car:\r\n                getActivity().onBackPressed();\r\n                break;\r\n        }\r\n    }\r\n\r\n    //تماس با کارشناس\r\n    private void dialContactPhone(final String phoneNumber) {\r\n        startActivity(new Intent(Intent.ACTION_DIAL, Uri.fromParts(\"tel\", phoneNumber, null)));\r\n    }\r\n\r\n    //ارسال پیام به کارشناس\r\n    private void sendTextToExpert() {\r\n        Intent sendIntent = new Intent(Intent.ACTION_VIEW);\r\n        sendIntent.setData(Uri.parse(\"sms: 9540644 \"));\r\n        sendIntent.putExtra(\"sms_body\", \"this is a test message\");\r\n        startActivity(sendIntent);\r\n    }\r\n\r\n    @Override\r\n    public void onCarReceived(CarDetailModel model) {\r\n        int resId = tblCarFavoriets.checkState(itemId) ? R.drawable.ic_baseline_favorite_24 : R.drawable.ic_baseline_favorite_border_24;\r\n        favorite.setImageResource(resId);\r\n\r\n        carName.setText(model.getName());\r\n        productionYear.setText(model.getProductionYear());\r\n        mileage.setText(model.getMileage());\r\n        carBodyStatus.setText(model.getCarBodyStatus());\r\n        carBodyStatus2.setText(model.getCarBodyStatus());\r\n        brand.setText(model.getBrand());\r\n        chasisStatus.setText(model.getChassisStatus());\r\n        insuranceTime.setText(model.getInsuranceTime());\r\n        gearBox.setText(model.getGearBox());\r\n        ducument.setText(model.getDocument());\r\n        salesType.setText(model.getSalesType());\r\n        price.setText(model.getPrice());\r\n        description.setText(model.getDescription());\r\n        expertName.setText(model.getExpertName());\r\n        address.setText(model.getAddress());\r\n\r\n        if (model.isExchange()) {\r\n            txtExchange.setText(R.string.exchange);\r\n        } else {\r\n            txtExchange.setText(R.string.notExchange);\r\n        }\r\n\r\n        //ست کردن عکس کارشناس\r\n        Glide.with(this)\r\n                .load(CarBaseApi.API_IMAGE + model.getExpertImage())\r\n                .into(circleImageView);\r\n\r\n\r\n        descriptionText = model.getDescription();\r\n        if (descriptionText.length() > 300) {\r\n            showMoreDescribe.setVisibility(View.VISIBLE);\r\n            String subString = descriptionText.substring(0, 300);\r\n            description.setText(subString);\r\n        } else {\r\n            showMoreDescribe.setVisibility(View.GONE);\r\n        }\r\n\r\n\r\n        viewPagerAdapter = new SliderCarItemDetails(getContext(), model.getPhotos(), this);\r\n\r\n        viewPager.setAdapter(viewPagerAdapter);\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onPresenterStart() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onError(String error) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onFinish() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void loadingState(boolean load) {\r\n        if (load) {\r\n            loading.startShimmer();\r\n            refresh.setVisibility(View.GONE);\r\n        } else {\r\n            loading.stopShimmer();\r\n            loading.setVisibility(View.GONE);\r\n            refresh.setVisibility(View.GONE);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onLoadState(boolean successful) {\r\n        refresh.setVisibility(successful ? View.GONE : View.VISIBLE);\r\n        viewPager.setVisibility(successful ? View.VISIBLE : View.GONE);\r\n\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/ir/tdaapp/diako/shaar/Cars/View/Fragments/CarDeatailFragment.java	(revision 6590b616417e55a1bcf77ba8033df3bb9ce50ae8)
+++ app/src/main/java/ir/tdaapp/diako/shaar/Cars/View/Fragments/CarDeatailFragment.java	(date 1620284454998)
@@ -1,6 +1,7 @@
 package ir.tdaapp.diako.shaar.Cars.View.Fragments;
 
 import android.content.Intent;
+import android.graphics.Bitmap;
 import android.net.Uri;
 import android.os.Bundle;
 import android.transition.TransitionManager;
@@ -18,29 +19,30 @@
 import androidx.viewpager2.widget.ViewPager2;
 
 import com.bumptech.glide.Glide;
+import com.bumptech.glide.request.target.SimpleTarget;
+import com.bumptech.glide.request.transition.Transition;
 import com.facebook.shimmer.ShimmerFrameLayout;
 
-import java.util.ArrayList;
-
 import de.hdodenhof.circleimageview.CircleImageView;
 import ir.tdaapp.diako.shaar.Cars.Model.Adapters.SliderCarItemDetails;
-import ir.tdaapp.diako.shaar.Cars.Model.Repository.database.TblCarFavoriets;
+import ir.tdaapp.diako.shaar.Cars.Model.Repository.Database.TblCarFavoriets;
 import ir.tdaapp.diako.shaar.Cars.Model.Services.CarDetailFragmentService;
 import ir.tdaapp.diako.shaar.Cars.Model.Utilities.CarBaseApi;
 import ir.tdaapp.diako.shaar.Cars.Model.Utilities.CarBaseFragment;
 import ir.tdaapp.diako.shaar.Cars.Model.ViewModels.CarDetailModel;
-import ir.tdaapp.diako.shaar.Cars.Model.ViewModels.CarDetailsPhotoModel;
 import ir.tdaapp.diako.shaar.Cars.Presenter.CarDetailFragmentPresenter;
 import ir.tdaapp.diako.shaar.CityGuide.Models.Services.OnGlideImageListener;
 import ir.tdaapp.diako.shaar.CityGuide.Models.Utilities.ZoomOutPageTransformer;
+import ir.tdaapp.diako.shaar.Interface.IBase;
 import ir.tdaapp.diako.shaar.R;
 
-public class CarDeatailFragment extends CarBaseFragment implements OnGlideImageListener, CarDetailFragmentService, View.OnClickListener {
+public class CarDeatailFragment extends CarBaseFragment implements OnGlideImageListener, CarDetailFragmentService, View.OnClickListener, IBase {
 
     public static final String TAG = "CarDeatailFragment";
 
     int itemId, userId;
 
+
     TextView carName, productionYear, mileage, carBodyStatus, carBodyStatus2, brand,
             chasisStatus, insuranceTime, gearBox, ducument, salesType, price, description,
             expertName, txtExchange, address;
@@ -182,6 +184,7 @@
                 } catch (Exception e) {
                     e.printStackTrace();
                 }
+                break;
 
             case R.id.imageButton_details_car:
                 getActivity().onBackPressed();
@@ -230,10 +233,20 @@
         }
 
         //ست کردن عکس کارشناس
-        Glide.with(this)
-                .load(CarBaseApi.API_IMAGE + model.getExpertImage())
-                .into(circleImageView);
+
+        String imageUrl = CarBaseApi.API_IMAGE_CAR_EXPERT;
 
+
+        Glide.with(getActivity()).asBitmap().load(imageUrl)
+                .into(new SimpleTarget<Bitmap>() {
+                    @Override
+                    public void onResourceReady(@NonNull Bitmap resource, @Nullable Transition<? super Bitmap> transition) {
+                        try {
+                            circleImageView.setImageBitmap(resource);
+                        } catch (Exception e) {
+                        }
+                    }
+                });
 
         descriptionText = model.getDescription();
         if (descriptionText.length() > 300) {
